<!DOCTYPE html>
<html>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>

<body>
<div ng-app = "myApp" ng-controller = "customersCtrl">
	<button id = "btnStart" ng-click = "Start()">Start</button>
	<div class = "spinner" ng-show = "loading">
		<img src = "https://i2.wp.com/www.dhp11.com/foswiki/pub/Internal/2012-06-12/spinner.gif"/>
	</div>
	 <ul>

    <li ng-repeat = "x in names track by $index"> <!--correct ng-repeat error-->

    {{ x.Name + ', ' + x.Country }}

    </li>

    </ul>
</div>
<script>
	//Brute force first
	var urls = ["http://hipsterjesus.com/api/","http://www.w3schools.com/angular/customers.php","http://www.w3schools.com/angular/customers.php","http://hipsterjesus.com/api/"]; 
	var promises = []; //empty array of promises
	var app = angular.module('myApp', []);
	
	app.controller('customersCtrl', function($scope, $http, $q, $timeout){
		$scope.loading = false;
		
		$scope.Start = function(){
			$scope.loading = true;
			
			setTimeout(function(){
				$http.get(urls[0])
				.then(function(values){
					console.log(values.data);
					
					return $http.get(urls[1]);
				})
				.then(function(values){
					console.log(values.data);
					
					return $http.get(urls[2]);
				}).then(function(values){
					console.log(values.data);
					
					return $http.get(urls[3]);
				}).then(function(values){
					console.log(values.data);
				});
				
				console.log("Done!");
				$scope.loading = false;
			},3000);
		}
	});
</script>
</body>

</html>